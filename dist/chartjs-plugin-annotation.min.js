/*@preserve!
 * chartjs-plugin-annotation.js
 * http://chartjs.org/
 * Version: 0.5.8
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Annotation.js/blob/master/LICENSE.md
 */
!function i(a,o,l){function r(t,e){if(!o[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},a[t][0].call(n.exports,function(e){return r(a[t][1][e]||e)},n,n.exports,i,a,o,l)}return o[t].exports}for(var s="function"==typeof require&&require,e=0;e<l.length;e++)r(l[e]);return r}({1:[function(e,t,n){},{}],2:[function(n,e,t){e.exports=function(e){var a=e.helpers,l=n("./helpers.js")(e),o=n("./events.js")(e),r=e.Annotation.types;function i(e){l.decorate(e,"afterDataLimits",function(e,t){e&&e(t),l.adjustScaleRange(t)})}function t(i){return function(e,t){var n=e.annotation.options.drawTime;l.elements(e).filter(function(e){return i===(e.options.drawTime||n)}).forEach(function(e){e.configure(),e.transition(t).draw()})}}function s(e){var t=e.plugins;return(t&&t.annotation?t.annotation:null)||e.annotation||{}}return{id:"annotation",beforeInit:function(e){var t=e.options,n=e.annotation={elements:{},options:l.initConfig(s(t)),onDestroy:[],firstRun:!0,supported:!1};e.ensureScalesHaveIDs(),t.scales&&(n.supported=!0,a.each(t.scales.xAxes,i),a.each(t.scales.yAxes,i))},beforeUpdate:function(i){var a,o=i.annotation;o.supported&&(o.firstRun?o.firstRun=!1:o.options=l.initConfig(s(i.options)),a=[],o.options.annotations.forEach(function(e){var t,n=e.id||l.objectId();!o.elements[n]&&r[e.type]?((t=new r[e.type]({id:n,options:e,chartInstance:i})).initialize(),o.elements[n]=t,e.id=n,a.push(n)):o.elements[n]&&a.push(n)}),Object.keys(o.elements).forEach(function(e){-1===a.indexOf(e)&&(o.elements[e].destroy(),delete o.elements[e])}))},beforeDatasetsDraw:t("beforeDatasetsDraw"),afterDatasetsDraw:t("afterDatasetsDraw"),afterDraw:t("afterDraw"),afterInit:function(t){var n,i,e=t.annotation.options.events;a.isArray(e)&&0<e.length&&(n=t.chart.canvas,i=o.dispatcher.bind(t),o.collapseHoverEvents(e).forEach(function(e){a.addEvent(n,e,i),t.annotation.onDestroy.push(function(){a.removeEvent(n,e,i)})}))},destroy:function(e){if(e&&e.annotation)for(var t=e.annotation.onDestroy;0<t.length;)t.pop()()}}}},{"./events.js":4,"./helpers.js":5}],3:[function(e,t,n){t.exports=function(e){var t=e.helpers;return e.Element.extend({initialize:function(){this.hidden=!1,this.hovering=!1,this._model=t.clone(this._model)||{},this.setDataLimits()},destroy:function(){},setDataLimits:function(){},configure:function(){},inRange:function(){},getCenterPoint:function(){},getWidth:function(){},getHeight:function(){},getArea:function(){},draw:function(){}})}},{}],4:[function(t,e,n){e.exports=function(e){var f,h=e.helpers,b=t("./helpers.js")(e);function g(e){var t=!1,e=e.filter(function(e){switch(e){case"mouseenter":case"mouseover":case"mouseout":case"mouseleave":return!(t=!0);default:return!0}});return t&&-1===e.indexOf("mousemove")&&e.push("mousemove"),e}function p(n,i,a){var o=n.options;n.hovering&&(n.hovering=!1,f=void 0,["mouseout","mouseleave"].forEach(function(e){var t=b.getEventHandlerName(e),e=b.createMouseEvent(e,i);"function"==typeof o[t]&&a.push([o[t],e,n])}))}return{dispatcher:function(t){var n,i,a,o,e=this.annotation,l=b.elements(this),r=h.getRelativePosition(t,this.chart),s=b.getNearestItems(l,r),c=g(e.options.events),r=e.options.dblClickSpeed,u=[],e=b.getEventHandlerName(t.type),d=(s||{}).options;if("mousemove"===t.type&&(s&&!s.hovering?(f&&s!==f&&p(f,t,u),i=t,a=u,o=(n=s).options,n.hovering||["mouseenter","mouseover"].forEach(function(e){var t=b.getEventHandlerName(e),e=b.createMouseEvent(e,i);n.hovering=!0,f=n,"function"==typeof o[t]&&a.push([o[t],e,n])})):s||l.forEach(function(e){p(e,t,u)})),s&&-1<c.indexOf("dblclick")&&"function"==typeof d.onDblclick){if("click"===t.type&&"function"==typeof d.onClick)return clearTimeout(s.clickTimeout),s.clickTimeout=setTimeout(function(){delete s.clickTimeout,d.onClick.call(s,t)},r),t.stopImmediatePropagation(),void t.preventDefault();"dblclick"===t.type&&s.clickTimeout&&(clearTimeout(s.clickTimeout),delete s.clickTimeout)}s&&"function"==typeof d[e]&&0===u.length&&u.push([d[e],t,s]),0<u.length&&(t.stopImmediatePropagation(),b.supportsEventListenerOptions||t.preventDefault(),u.forEach(function(e){e[0].call(e[2],e[1])}))},collapseHoverEvents:g}}},{"./helpers.js":5}],5:[function(e,t,n){function a(){}function l(e){var t=e.annotation.elements;return Object.keys(t).map(function(e){return t[e]})}function r(){return Math.random().toString(36).substr(2,6)}function s(e){return null!=e&&("number"==typeof e?isFinite(e):!!e)}function c(t,n,i){t["$"+n]||(t[n]?(t["$"+n]=t[n].bind(t),t[n]=function(){var e=[t["$"+n]].concat(Array.prototype.slice.call(arguments));return i.apply(t,e)}):t[n]=function(){var e=[void 0].concat(Array.prototype.slice.call(arguments));return i.apply(t,e)})}function u(e,t){e.forEach(function(e){(t?e[t]:e)()})}function d(e){return"on"+e[0].toUpperCase()+e.substring(1)}function f(t,n){try{return new MouseEvent(t,n)}catch(e){try{var i=document.createEvent("MouseEvent");return i.initMouseEvent(t,n.canBubble,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget),i}catch(e){var a=document.createEvent("Event");return a.initEvent(t,n.canBubble,n.cancelable),a}}}t.exports=function(i){var o=i.helpers;return{initConfig:function(t){const n=Object.assign({},i.Annotation.defaults);return Object.keys(n).forEach(function(e){t[e]&&(Array.isArray(n[e])?n[e]=t[e].slice():n[e]=t[e])}),n.annotations.forEach(function(t){t.label&&Object.keys(i.Annotation.labelDefaults).forEach(function(e){t.label[e]||(t.label[e]=i.Annotation.labelDefaults[e])})}),n},elements:l,callEach:u,noop:a,objectId:r,isValid:s,decorate:c,adjustScaleRange:function(e){var t,n,i,a=(t=e.id,n=l(e.chart),i=e.min,a=e.max,{min:(n=n.filter(function(e){return!!e._model.ranges[t]}).map(function(e){return e._model.ranges[t]})).map(function(e){return Number(e.min)}).reduce(function(e,t){return isFinite(t)&&!isNaN(t)&&t<e?t:e},i),max:n.map(function(e){return Number(e.max)}).reduce(function(e,t){return isFinite(t)&&!isNaN(t)&&e<t?t:e},a)});void 0===e.options.ticks.min&&void 0===e.options.ticks.suggestedMin&&(e.min=a.min),void 0===e.options.ticks.max&&void 0===e.options.ticks.suggestedMax&&(e.max=a.max),e.handleTickRangeOptions&&e.handleTickRangeOptions()},getNearestItems:function(e,i){var a=Number.POSITIVE_INFINITY;return e.filter(function(e){return e.inRange(i.x,i.y)}).reduce(function(e,t){var n=t.getCenterPoint(),n=o.distanceBetweenPoints(i,n);return n<a?(e=[t],a=n):n===a&&e.push(t),e},[]).sort(function(e,t){var n=e.getArea(),i=t.getArea();return i<n||n<i?n-i:e._index-t._index}).slice(0,1)[0]},getEventHandlerName:d,createMouseEvent:f,supportsEventListenerOptions:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()}}},{}],6:[function(e,t,n){var i=e("chart.js");(i="function"==typeof i?i:window.Chart).Annotation=i.Annotation||{},i.Annotation.drawTimeOptions={afterDraw:"afterDraw",afterDatasetsDraw:"afterDatasetsDraw",beforeDatasetsDraw:"beforeDatasetsDraw"},i.Annotation.defaults={display:!0,drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[]},i.Annotation.annotationDefaults={display:!0},i.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:i.defaults.global.defaultFontFamily,fontSize:i.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},i.Annotation.Element=e("./element.js")(i),i.Annotation.types={line:e("./types/line.js")(i),box:e("./types/box.js")(i)};e=e("./annotation.js")(i);t.exports=e,i.pluginService.register(e)},{"./annotation.js":2,"./element.js":3,"./types/box.js":7,"./types/line.js":8,"chart.js":1}],7:[function(t,e,n){e.exports=function(e){var f=t("../helpers.js")(e);return e.Annotation.Element.extend({setDataLimits:function(){var e,t=this._model,n=this.options,i=this.chartInstance,a=i.scales[n.xScaleID],o=i.scales[n.yScaleID],l=i.chartArea;t.ranges={},l&&(i=e=0,a&&(e=f.isValid(n.xMin)?n.xMin:a.getValueForPixel(l.left),i=f.isValid(n.xMax)?n.xMax:a.getValueForPixel(l.right),t.ranges[n.xScaleID]={min:Math.min(e,i),max:Math.max(e,i)}),o&&(e=f.isValid(n.yMin)?n.yMin:o.getValueForPixel(l.bottom),i=f.isValid(n.yMax)?n.yMax:o.getValueForPixel(l.top),t.ranges[n.yScaleID]={min:Math.min(e,i),max:Math.max(e,i)}))},configure:function(){var e=this._model,t=this.options,n=this.chartInstance,i=n.scales[t.xScaleID],a=n.scales[t.yScaleID],o=n.chartArea;e.clip={x1:o.left,x2:o.right,y1:o.top,y2:o.bottom};var l,r,s=o.left,c=o.top,u=o.right,d=o.bottom;i&&(l=f.isValid(t.xMin)?i.getPixelForValue(t.xMin):o.left,r=f.isValid(t.xMax)?i.getPixelForValue(t.xMax):o.right,s=Math.min(l,r),u=Math.max(l,r)),a&&(l=f.isValid(t.yMin)?a.getPixelForValue(t.yMin):o.bottom,r=f.isValid(t.yMax)?a.getPixelForValue(t.yMax):o.top,c=Math.min(l,r),d=Math.max(l,r)),e.left=s,e.top=c,e.right=u,e.bottom=d,t.display&&n.annotation.options.display?(e.borderColor=t.borderColor,e.borderWidth=t.borderWidth,e.backgroundColor=t.backgroundColor):(e.borderColor="rgba(0,0,0,0)",e.borderWidth=0,e.backgroundColor="rgba(0,0,0,0)")},inRange:function(e,t){var n=this._model;return n&&e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom},getCenterPoint:function(){var e=this._model;return{x:(e.right+e.left)/2,y:(e.bottom+e.top)/2}},getWidth:function(){var e=this._model;return Math.abs(e.right-e.left)},getHeight:function(){var e=this._model;return Math.abs(e.bottom-e.top)},getArea:function(){return this.getWidth()*this.getHeight()},draw:function(){var e=this._view,t=this.chartInstance.chart.ctx;t.save(),t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.fillStyle=e.backgroundColor;var n=e.right-e.left,i=e.bottom-e.top;t.fillRect(e.left,e.top,n,i),t.strokeRect(e.left,e.top,n,i),t.restore()}})}},{"../helpers.js":5}],8:[function(t,e,n){e.exports=function(e){var s=e.helpers,c=t("../helpers.js")(e),h="horizontal",b="vertical";function u(t){var n=(t.x2-t.x1)/(t.y2-t.y1),i=t.x1||0;this.m=n,this.b=i,this.getX=function(e){return n*(e-t.y1)+i},this.getY=function(e){return(e-i)/n+t.y1},this.intersects=function(e,t,n){n=n||.001;var i=this.getY(e),a=this.getX(t);return(!isFinite(i)||Math.abs(t-i)<n)&&(!isFinite(a)||Math.abs(e-a)<n)}}return e.Annotation.Element.extend({setDataLimits:function(){var e=this._model,t=this.options;e.ranges={},e.ranges[t.scaleID]={min:t.value,max:t.endValue||t.value}},configure:function(){var e,t,n,i=this._model,a=this.options,o=this.chartInstance,l=o.chart.ctx,r=o.scales[a.scaleID];r&&(e=c.isValid(a.value)?r.getPixelForValue(a.value,a.value.index):NaN,t=c.isValid(a.endValue)?r.getPixelForValue(a.endValue,a.value.index):e),isNaN(e)||(n=o.chartArea,i.clip={x1:n.left,x2:n.right,y1:n.top,y2:n.bottom},this.options.mode===h?(i.x1=n.left,i.x2=n.right,i.y1=e,i.y2=t):(i.y1=n.top,i.y2=n.bottom,i.x1=e,i.x2=t),i.line=new u(i),i.mode=a.mode,i.onlyForDataIndex=c.isValid(a.onlyForDataIndex)?a.onlyForDataIndex:NaN,i.datasetIndex=c.isValid(a.datasetIndex)?a.datasetIndex:0,i.linePadding=c.isValid(a.linePadding)?a.linePadding:0,i.labelBackgroundColor=a.label.backgroundColor,i.labelFontFamily=a.label.fontFamily,i.labelFontSize=a.label.fontSize,i.labelFontStyle=a.label.fontStyle,i.labelFontColor=a.label.fontColor,i.labelXPadding=a.label.xPadding,i.labelYPadding=a.label.yPadding,i.labelCornerRadius=a.label.cornerRadius,i.labelPosition=a.label.position,i.labelXAdjust=a.label.xAdjust,i.labelYAdjust=a.label.yAdjust,i.labelEnabled=a.label.enabled,i.labelContent=a.label.content,i.labelRotation=a.label.rotation,r=this.getLineBoundaries(i),l.font=s.fontString(i.labelFontSize,i.labelFontStyle,i.labelFontFamily),n=l.measureText(i.labelContent).width,e=i.labelFontSize,i.labelHeight=e+2*i.labelYPadding,i.labelContent&&s.isArray(i.labelContent)&&(t=i.labelContent.slice(0).sort(function(e,t){return t.length-e.length})[0],n=l.measureText(t).width,i.labelHeight=e*i.labelContent.length+2*i.labelYPadding,i.labelHeight+=i.labelYPadding*(i.labelContent.length-1)),r=function(e,t,n,i,a,o,l,r,s){var c=e.line,u={},d=0,f=0;switch(!0){case e.mode===b&&"top"===e.labelPosition:f=a+e.labelYAdjust,d=t/2+e.labelXAdjust,u.y=r+f,u.x=(isFinite(c.m)?c.getX(u.y):o)-d;break;case e.mode===b&&"bottom"===e.labelPosition:f=n+a+e.labelYAdjust,d=t/2+e.labelXAdjust,u.y=s-f,u.x=(isFinite(c.m)?c.getX(u.y):o)-d;break;case e.mode===h&&"left"===e.labelPosition:d=i+e.labelXAdjust,f=-n/2+e.labelYAdjust,u.x=o+d,u.y=c.getY(u.x)+f;break;case e.mode===h&&"right"===e.labelPosition:d=t+i+e.labelXAdjust,f=-n/2+e.labelYAdjust,u.x=l-d,u.y=c.getY(u.x)+f;break;default:u.x=(o+l-t)/2+e.labelXAdjust,u.y=(r+s-n)/2+e.labelYAdjust}return u}(i,n,e,i.labelXPadding,i.labelYPadding,r.x1,r.x2,r.y1,r.y2),i.labelX=r.x-i.labelXPadding,i.labelY=r.y-i.labelYPadding,i.labelWidth=n+2*i.labelXPadding,i.borderColor=a.borderColor,i.borderWidth=a.borderWidth,i.borderDash=a.borderDash||[],i.borderDashOffset=a.borderDashOffset||0,a.display&&o.annotation.options.display||(i.labelEnabled=!1,i.borderColor="rgba(0,0,0,0)",i.borderWidth=0))},inRange:function(e,t){var n=this._model;return n.line&&n.line.intersects(e,t,this.getHeight())||n.labelEnabled&&n.labelContent&&e>=n.labelX&&e<=n.labelX+n.labelWidth&&t>=n.labelY&&t<=n.labelY+n.labelHeight},getCenterPoint:function(){return{x:(this._model.x2+this._model.x1)/2,y:(this._model.y2+this._model.y1)/2}},getWidth:function(){return Math.abs(this._model.right-this._model.left)},getHeight:function(){return this._model.borderWidth||1},getArea:function(){return Math.sqrt(Math.pow(this.getWidth(),2)+Math.pow(this.getHeight(),2))},_getLineBoundariesForHorizontalLine:function(e,t,n){var i=e.width/2;return{x1:e.x-i+n,x2:e.x+i-n}},_getLineBoundariesForVerticalLine:function(e,t,n){t=e.height/t/2;return{y1:e.y-t-n,y2:e.y+t+n}},getLineBoundaries:function(e){var t={x1:e.x1,x2:e.x2},n={y1:e.y1,y2:e.y2};if(isNaN(e.onlyForDataIndex))return Object.assign(t,n);var i=this.chartInstance.getDatasetMeta(e.datasetIndex),a=i.data[e.onlyForDataIndex];"_model"in a||i.controller.update();var o=i.controller.getRuler().scale.options.barPercentage;if(this.options.mode===h){i=this._getLineBoundariesForHorizontalLine(a._model,o,e.linePadding);return Object.assign(i,n)}e=this._getLineBoundariesForVerticalLine(a._model,o,e.linePadding);return Object.assign(e,t)},draw:function(){var e=this._view,t=this.chartInstance.chart.ctx;if(e.clip){t.save(),t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.setLineDash&&t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.beginPath();var n=this.getLineBoundaries(e),i=n.x1,a=n.x2,o=n.y1,n=n.y2;if(t.moveTo(i,o),t.lineTo(a,n),t.stroke(),e.labelEnabled&&e.labelContent)if(t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.translate(e.labelX+e.labelWidth/2,e.labelY+e.labelHeight/2),t.rotate(e.labelRotation*Math.PI/180),t.fillStyle=e.labelBackgroundColor,s.drawRoundedRectangle(t,-e.labelWidth/2,-e.labelHeight/2,e.labelWidth,e.labelHeight,e.labelCornerRadius),t.fill(),t.font=s.fontString(e.labelFontSize,e.labelFontStyle,e.labelFontFamily),t.fillStyle=e.labelFontColor,t.textAlign="center",e.labelContent&&s.isArray(e.labelContent))for(var l=-e.labelHeight/2+e.labelYPadding,r=0;r<e.labelContent.length;r++)t.textBaseline="top",t.fillText(e.labelContent[r],-e.labelWidth/2+e.labelWidth/2,l),l+=e.labelFontSize+e.labelYPadding;else t.textBaseline="middle",t.fillText(e.labelContent,0,0);t.restore()}}})}},{"../helpers.js":5}]},{},[6]);